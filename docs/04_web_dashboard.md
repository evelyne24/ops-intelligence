# Web Dashboard

The `dashboard` service is a Streamlit application that provides a web interface to visualize the operational intelligence data generated by the `analyzer` service. The source code for the dashboard is located in `src/web/dashboard.py`.

## Functionality

The dashboard's main function is to read the `dashboard_data.json` file from the shared data volume and display key metrics.

### Data Loading

-   The application looks for the data file at the path `/app/data/dashboard_data.json`, which is the location of the shared volume within the container.
-   If the file does not exist, it displays a "Waiting for agents" message, prompting the user to refresh.
-   It includes basic error handling to manage malformed JSON that might be produced by the language model, including stripping out Markdown code blocks.

### Metrics Display

The dashboard presents the summary statistics in a clean, two-column layout:

-   **Ghost Work**: Shows the percentage of "ghost work" pull requests (those without a linked Jira ticket).
-   **Tickets Processed**: Displays the total number of Jira tickets that were processed.

## Running the Dashboard

The dashboard is started by running the `dashboard` command of the main application:

```bash
python -m src.ops_intelligence.main dashboard
```

When using Docker Compose, this is handled automatically. You can access the dashboard in your browser at [http://localhost:8501](http://localhost:8501).

## Code Overview

```python
import streamlit as st
import pandas as pd
import json
import os

# Point to the shared Docker volume path
DATA_PATH = "/app/data/dashboard_data.json"

def main():
    st.set_page_config(layout="wide", page_title="Ops Intelligence")
    st.title("ü§ñ Agentic Engineering Dashboard")

    if not os.path.exists(DATA_PATH):
        st.warning("‚è≥ Waiting for agents to generate data... Refresh shortly.")
        return

    with open(DATA_PATH, "r") as f:
        # ... (Error handling for JSON)
        data = json.loads(content)

    stats = data.get("summary", {})
    
    col1, col2 = st.columns(2)
    col1.metric("Ghost Work", f"{stats.get('ghost_work_pct', 0)}%")
    col2.metric("Tickets Processed", stats.get('total_tickets', 0))

if __name__ == "__main__":
    main()
```
